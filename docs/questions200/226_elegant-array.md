# 226 优雅数组

## 题目描述

如果一个数组中出现次数最多的元素出现大于等于`k`次，被称为`k-优雅数组`，`k`也可以被称为`优雅阈值`。

例如，数组`[1, 2, 3, 1, 2, 3, 1]`，它是一个`3-优雅数组`，因为元素`1`出现次数大于等于3次。数组`[1, 2, 3, 1, 2]`就不是一个`3-优雅数组`，因为其中出现次数最多的元素是`1`和`2，只出现了2次。

给定一个数组`A`和`k`，请求出`A`有多少子数组是`k-优雅子数组`。子数组是数组中一个或多个连续元素组成的数组。

例如，数组`[1, 2, 3, 4]`包含10个子数组，分别是：`[1]`、`[1, 2]`、`[1, 2, 3]`、`[1, 2, 3, 4]`、`[2]`、`[2, 3]`、`[2, 3, 4]`、`[3]`、`[3, 4]`、`[4]`。

## 输入描述

第一行输入两个整数`n`和`k`，`n`是数组`A`的长度，`k`是优雅阈值。

第二行输入`n`个整数，表示给定的数组`A`。其中 1 <= n < 10000、1 <= k <= n。数组`A`中的元素`A[i]`满足：1 <= A[i] <= n。

## 输出描述

数据一个整数，表示数组`A`中`k-优雅子数组`的数量，行尾不要有多余空格。

## 示例描述

### 示例一

**输入：**

```text
7 3
1 2 3 1 2 3 1
```

**输出：**

```text
1
```

**说明：**  
只有子数组`[1, 2, 3, 1, 2, 3, 1]`是`3-优雅数组`。

### 示例二

**输入：**

```text
7 2
1 2 3 1 2 3 1
```

**输出：**

```text
10
```

**说明：**  
10个优雅子数组分别是（下标从0计数）：

- 长度为4的子数组：`[1, 2, 3, 1]`（下标0\~3）、`[2, 3, 1, 2]`（下标1\~4）、`[3, 1, 2, 3]`（下标2\~5）、`[1, 2, 3, 1]`（下标3\~6）。
- 长度为5的子数组：`[1, 2, 3, 1, 2]`（下标0\~4）、`[2, 3, 1, 2, 3]`（下标1\~5）、`[3, 1, 2, 3, 1]`（下标2\~6）。
- 长度为6的子数组：`[1, 2, 3, 1, 2, 3]`（下标0\~5）、`[2, 3, 1, 2, 3, 1]`（下标1\~6）。
- 长度为7的子数组：`[1, 2, 3, 1, 2, 3, 1]`（下标0\~6）。

## 解题思路

**简单提示：**

1. 题目中提到的子数组，是切片内容。
2. 只要统计的子数组已满足要求，则满足要求的子数组个数为数组长度-子数组终点。

## 解题代码

```python
from collections import defaultdict


def solve_method(arr, k):
    res = 0
    n = len(arr)
    # i是子数组起点
    for i in range(n):
        # 统计arr元素出现次数字典，key为元素值，value为出现次数
        count = defaultdict(int)

        # j是子数组终点
        for j in range(i, n):
            key = arr[j]
            # 增加元素值的出现次数
            count[key] += 1
            # 出现了k次，即记录满足要求的子数组个数
            if count[key] >= k:
                # 自坐标j后的子数组均满足要求
                res += n - j
                break

    return res


if __name__ == '__main__':
    assert solve_method([1, 2, 3, 1, 2, 3, 1], 3) == 1
    assert solve_method([1, 2, 3, 1, 2, 3, 1], 2) == 10
```